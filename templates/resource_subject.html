{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ subject }} ‚Äî CampusConnect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Inter', sans-serif; background:#0b0f14; color:white; }

        .topbar {
            height:110px;
            background: linear-gradient(180deg, #5BE37F 0%, #43C96A 100%);
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:0 50px;
            border-bottom-left-radius:18px;
            border-bottom-right-radius:18px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.35), inset 0 -10px 20px rgba(0,0,0,0.15);
        }
        .logo-box { display:flex; align-items:center; gap:14px; }
        .logo-box img { width:52px; height:52px; background:#0b0f14; padding:10px; border-radius:14px; }
        .logo-box span { font-size:22px; font-weight:700; }
        .back-btn {
            text-decoration:none;
            background:rgba(0,0,0,0.2);
            color:white;
            padding:10px 20px;
            border-radius:10px;
            font-size:14px;
            font-weight:500;
        }
        .back-btn:hover { background:rgba(0,0,0,0.35); }

        .page-header {
            max-width:1200px;
            margin:50px auto 30px;
            padding:0 40px;
        }
        .page-header h1 { font-size:36px; font-weight:800; }
        .page-header p { color:rgba(255,255,255,0.3); font-size:14px; margin-top:6px; }

        .wrapper { max-width:1200px; margin:0 auto 80px; padding:0 40px; }

        .files-grid {
            display:grid;
            grid-template-columns:repeat(3, 1fr);
            gap:24px;
        }

        .file-card {
            background:linear-gradient(180deg,#0f2943,#0b2036);
            padding:28px 24px;
            border-radius:16px;
            border:1px solid rgba(255,255,255,0.18);
            text-align:center;
            box-shadow:0 8px 24px rgba(0,0,0,0.35);
            transition:all .25s ease;
            display:flex;
            flex-direction:column;
            gap:8px;
        }
        .file-card:hover { transform:translateY(-6px); box-shadow:0 16px 40px rgba(0,0,0,0.55); }
        .file-card .icon { font-size:36px; margin-bottom:6px; }
        .file-card h3 { font-size:17px; font-weight:700; }
        .file-card .desc { color:#b9c4cf; font-size:13px; line-height:1.5; }
        .file-card .meta { color:rgba(255,255,255,0.25); font-size:12px; margin-top:4px; }

        .btn {
            background:#1e88ff;
            border:none;
            color:white;
            padding:10px 20px;
            border-radius:9px;
            font-size:14px;
            font-weight:500;
            cursor:pointer;
            transition:.2s;
            text-decoration:none;
            display:inline-block;
            margin-top:10px;
        }
        .btn:hover { background:#0f6de0; }

        .empty {
            grid-column:1/-1;
            text-align:center;
            padding:80px;
            color:rgba(255,255,255,0.2);
            font-size:16px;
        }

        @media(max-width:900px) { .files-grid { grid-template-columns:repeat(2,1fr); } }
        @media(max-width:560px) { .files-grid { grid-template-columns:1fr; } }
    </style>
</head>
<body>

<header class="topbar">
    <div class="logo-box">
        <img src="{% static 'images/logo.png' %}" alt="CampusConnect">
        <span>CampusConnect</span>
    </div>
    <a href="{% url 'resource_access' %}" class="back-btn">‚Üê Back to Subjects</a>
</header>

<div class="page-header">
    <h1>{{ subject }}</h1>
    <p>{{ resources.count }} resource{{ resources.count|pluralize }} available</p>
</div>

<main class="wrapper">
    <section class="files-grid">
        {% for resource in resources %}
        <div class="file-card">
            <div class="icon">
                {% if resource.file.name|slice:"-4:" == ".pdf" %}üìÑ
                {% elif resource.file.name|slice:"-5:" == ".pptx" %}üìä
                {% elif resource.file.name|slice:"-5:" == ".docx" %}üìù
                {% elif resource.file.name|slice:"-4:" == ".zip" %}üóúÔ∏è
                {% else %}üìÅ{% endif %}
            </div>
            <h3>{{ resource.title }}</h3>
            {% if resource.description %}
            <p class="desc">{{ resource.description }}</p>
            {% endif %}
            <p class="meta">‚¨Ü {{ resource.uploaded_by.username }} ¬∑ {{ resource.uploaded_at|date:"d M Y" }}</p>
            <a href="{{ resource.file.url }}" download class="btn">‚¨á Download</a>
        </div>
        {% empty %}
        <div class="empty">
            <p>üì≠ No resources for this subject yet.</p>
        </div>
        {% endfor %}
    </section>
</main>

</body>
</html>